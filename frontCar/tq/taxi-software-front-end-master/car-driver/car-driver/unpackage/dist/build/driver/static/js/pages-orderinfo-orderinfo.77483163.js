(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-orderinfo-orderinfo"],{"0f15":function(t,e,a){function o(t){this.key=t.key,this.requestConfig={key:t.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"},this.MeRequestConfig={key:t.key,serviceName:"https://restapi.amap.com/rest/me"}}a("4de4"),a("d3b7"),a("acd8"),a("14d9"),o.prototype.getWxLocation=function(t,e){wx.getLocation({type:"gcj02",success:function(t){t=t.longitude+","+t.latitude,wx.setStorage({key:"userLocation",data:t}),e(t)},fail:function(a){wx.getStorage({key:"userLocation",success:function(t){t.data&&e(t.data)}}),t.fail({errCode:"0",errMsg:a.errMsg||""})}})},o.prototype.getMEKeywordsSearch=function(t){if(!t.options)return t.fail({errCode:"0",errMsg:"缺少必要参数"});var e=t.options,a=this.MeRequestConfig,o={key:a.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"};e.layerId&&(o.layerId=e.layerId),e.keywords&&(o.keywords=e.keywords),e.city&&(o.city=e.city),e.filter&&(o.filter=e.filter),e.sortrule&&(o.sortrule=e.sortrule),e.pageNum&&(o.pageNum=e.pageNum),e.pageSize&&(o.pageSize=e.pageSize),e.sig&&(o.sig=e.sig),wx.request({url:a.serviceName+"/cpoint/datasearch/local",data:o,method:"GET",header:{"content-type":"application/json"},success:function(e){(e=e.data)&&e.status&&"1"===e.status&&0===e.code?t.success(e.data):t.fail({errCode:"0",errMsg:e})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getMEIdSearch=function(t){if(!t.options)return t.fail({errCode:"0",errMsg:"缺少必要参数"});var e=t.options,a=this.MeRequestConfig,o={key:a.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"};e.layerId&&(o.layerId=e.layerId),e.id&&(o.id=e.id),e.sig&&(o.sig=e.sig),wx.request({url:a.serviceName+"/cpoint/datasearch/id",data:o,method:"GET",header:{"content-type":"application/json"},success:function(e){(e=e.data)&&e.status&&"1"===e.status&&0===e.code?t.success(e.data):t.fail({errCode:"0",errMsg:e})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getMEPolygonSearch=function(t){if(!t.options)return t.fail({errCode:"0",errMsg:"缺少必要参数"});var e=t.options,a=this.MeRequestConfig,o={key:a.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"};e.layerId&&(o.layerId=e.layerId),e.keywords&&(o.keywords=e.keywords),e.polygon&&(o.polygon=e.polygon),e.filter&&(o.filter=e.filter),e.sortrule&&(o.sortrule=e.sortrule),e.pageNum&&(o.pageNum=e.pageNum),e.pageSize&&(o.pageSize=e.pageSize),e.sig&&(o.sig=e.sig),wx.request({url:a.serviceName+"/cpoint/datasearch/polygon",data:o,method:"GET",header:{"content-type":"application/json"},success:function(e){(e=e.data)&&e.status&&"1"===e.status&&0===e.code?t.success(e.data):t.fail({errCode:"0",errMsg:e})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getMEaroundSearch=function(t){if(!t.options)return t.fail({errCode:"0",errMsg:"缺少必要参数"});var e=t.options,a=this.MeRequestConfig,o={key:a.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"};e.layerId&&(o.layerId=e.layerId),e.keywords&&(o.keywords=e.keywords),e.center&&(o.center=e.center),e.radius&&(o.radius=e.radius),e.filter&&(o.filter=e.filter),e.sortrule&&(o.sortrule=e.sortrule),e.pageNum&&(o.pageNum=e.pageNum),e.pageSize&&(o.pageSize=e.pageSize),e.sig&&(o.sig=e.sig),wx.request({url:a.serviceName+"/cpoint/datasearch/around",data:o,method:"GET",header:{"content-type":"application/json"},success:function(e){(e=e.data)&&e.status&&"1"===e.status&&0===e.code?t.success(e.data):t.fail({errCode:"0",errMsg:e})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getGeo=function(t){var e=this.requestConfig,a=t.options;e={key:this.key,extensions:"all",s:e.s,platform:e.platform,appname:this.key,sdkversion:e.sdkversion,logversion:e.logversion},a.address&&(e.address=a.address),a.city&&(e.city=a.city),a.batch&&(e.batch=a.batch),a.sig&&(e.sig=a.sig),wx.request({url:"https://restapi.amap.com/v3/geocode/geo",data:e,method:"GET",header:{"content-type":"application/json"},success:function(e){(e=e.data)&&e.status&&"1"===e.status?t.success(e):t.fail({errCode:"0",errMsg:e})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getRegeo=function(t){function e(e){var o=a.requestConfig;wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:a.key,location:e,extensions:"all",s:o.s,platform:o.platform,appname:a.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(a){if(a.data.status&&"1"==a.data.status){a=a.data.regeocode;var o=a.addressComponent,i=[],s=a.roads[0].name+"附近",n=e.split(",")[0],r=e.split(",")[1];if(a.pois&&a.pois[0]){s=a.pois[0].name+"附近";var c=a.pois[0].location;c&&(n=parseFloat(c.split(",")[0]),r=parseFloat(c.split(",")[1]))}o.provice&&i.push(o.provice),o.city&&i.push(o.city),o.district&&i.push(o.district),o.streetNumber&&o.streetNumber.street&&o.streetNumber.number?(i.push(o.streetNumber.street),i.push(o.streetNumber.number)):i.push(a.roads[0].name),i=i.join(""),t.success([{iconPath:t.iconPath,width:t.iconWidth,height:t.iconHeight,name:i,desc:s,longitude:n,latitude:r,id:0,regeocodeData:a}])}else t.fail({errCode:a.data.infocode,errMsg:a.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var a=this;t.location?e(t.location):a.getWxLocation(t,(function(t){e(t)}))},o.prototype.getWeather=function(t){function e(e){var i="base";t.type&&"forecast"==t.type&&(i="all"),wx.request({url:"https://restapi.amap.com/v3/weather/weatherInfo",data:{key:a.key,city:e,extensions:i,s:o.s,platform:o.platform,appname:a.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(e){if(e.data.status&&"1"==e.data.status)if(e.data.lives){if((e=e.data.lives)&&0<e.length){e=e[0];var a={city:{text:"城市",data:e.city},weather:{text:"天气",data:e.weather},temperature:{text:"温度",data:e.temperature},winddirection:{text:"风向",data:e.winddirection+"风"},windpower:{text:"风力",data:e.windpower+"级"},humidity:{text:"湿度",data:e.humidity+"%"}};a.liveData=e,t.success(a)}}else e.data.forecasts&&e.data.forecasts[0]&&t.success({forecast:e.data.forecasts[0]});else t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var a=this,o=a.requestConfig;t.city?e(t.city):a.getWxLocation(t,(function(i){(function(i){wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:a.key,location:i,extensions:"all",s:o.s,platform:o.platform,appname:a.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(a){if(a.data.status&&"1"==a.data.status){if(a=a.data.regeocode,a.addressComponent)var o=a.addressComponent.adcode;else a.aois&&0<a.aois.length&&(o=a.aois[0].adcode);e(o)}else t.fail({errCode:a.data.infocode,errMsg:a.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})})(i)}))},o.prototype.getPoiAround=function(t){function e(e){e={key:a.key,location:e,s:o.s,platform:o.platform,appname:a.key,sdkversion:o.sdkversion,logversion:o.logversion},t.querytypes&&(e.types=t.querytypes),t.querykeywords&&(e.keywords=t.querykeywords),wx.request({url:"https://restapi.amap.com/v3/place/around",data:e,method:"GET",header:{"content-type":"application/json"},success:function(e){if(e.data.status&&"1"==e.data.status){if((e=e.data)&&e.pois){for(var a=[],o=0;o<e.pois.length;o++){var i=0==o?t.iconPathSelected:t.iconPath;a.push({latitude:parseFloat(e.pois[o].location.split(",")[1]),longitude:parseFloat(e.pois[o].location.split(",")[0]),iconPath:i,width:22,height:32,id:o,name:e.pois[o].name,address:e.pois[o].address})}t.success({markers:a,poisData:e.pois})}}else t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var a=this,o=a.requestConfig;t.location?e(t.location):a.getWxLocation(t,(function(t){e(t)}))},o.prototype.getStaticmap=function(t){function e(e){a.push("location="+e),t.zoom&&a.push("zoom="+t.zoom),t.size&&a.push("size="+t.size),t.scale&&a.push("scale="+t.scale),t.markers&&a.push("markers="+t.markers),t.labels&&a.push("labels="+t.labels),t.paths&&a.push("paths="+t.paths),t.traffic&&a.push("traffic="+t.traffic),e="https://restapi.amap.com/v3/staticmap?"+a.join("&"),t.success({url:e})}var a=[];a.push("key="+this.key);var o=this.requestConfig;a.push("s="+o.s),a.push("platform="+o.platform),a.push("appname="+o.appname),a.push("sdkversion="+o.sdkversion),a.push("logversion="+o.logversion),t.location?e(t.location):this.getWxLocation(t,(function(t){e(t)}))},o.prototype.getInputtips=function(t){var e=Object.assign({},this.requestConfig);t.location&&(e.location=t.location),t.keywords&&(e.keywords=t.keywords),t.type&&(e.type=t.type),t.city&&(e.city=t.city),t.citylimit&&(e.citylimit=t.citylimit),wx.request({url:"https://restapi.amap.com/v3/assistant/inputtips",data:e,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.tips&&t.success({tips:e.data.tips})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getDrivingRoute=function(t){var e=Object.assign({},this.requestConfig);t.origin&&(e.origin=t.origin),t.destination&&(e.destination=t.destination),t.strategy&&(e.strategy=t.strategy),t.waypoints&&(e.waypoints=t.waypoints),t.avoidpolygons&&(e.avoidpolygons=t.avoidpolygons),t.avoidroad&&(e.avoidroad=t.avoidroad),wx.request({url:"https://restapi.amap.com/v3/direction/driving",data:e,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths,taxi_cost:e.data.route.taxi_cost||""})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getWalkingRoute=function(t){var e=Object.assign({},this.requestConfig);t.origin&&(e.origin=t.origin),t.destination&&(e.destination=t.destination),wx.request({url:"https://restapi.amap.com/v3/direction/walking",data:e,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getTransitRoute=function(t){var e=Object.assign({},this.requestConfig);t.origin&&(e.origin=t.origin),t.destination&&(e.destination=t.destination),t.strategy&&(e.strategy=t.strategy),t.city&&(e.city=t.city),t.cityd&&(e.cityd=t.cityd),wx.request({url:"https://restapi.amap.com/v3/direction/transit/integrated",data:e,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&(e=e.data.route,t.success({distance:e.distance||"",taxi_cost:e.taxi_cost||"",transits:e.transits}))},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},o.prototype.getRidingRoute=function(t){var e=Object.assign({},this.requestConfig);t.origin&&(e.origin=t.origin),t.destination&&(e.destination=t.destination),wx.request({url:"https://restapi.amap.com/v3/direction/riding",data:e,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},t.exports.AMapWX=o},3983:function(t,e,a){"use strict";a.r(e);var o=a("fb3c"),i=a("59a8");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("3f99");var n=a("f0c5"),r=Object(n["a"])(i["default"],o["b"],o["c"],!1,null,"f329ae04",null,!1,o["a"],void 0);e["default"]=r.exports},"3f99":function(t,e,a){"use strict";var o=a("efb2"),i=a.n(o);i.a},4047:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.destination[data-v-f329ae04]{width:100vw;height:100vh;overflow:scroll;padding:%?40?% %?20?%;box-sizing:border-box}.destination .content[data-v-f329ae04]{box-shadow:1px 1px 2px 2px #eee;height:100%}.destination .content uni-image[data-v-f329ae04]{width:%?70?%;height:%?70?%;margin:%?40?%}.destination .content .item[data-v-f329ae04]{height:%?200?%;border-bottom:2.5px solid #eee;display:flex;align-items:center}.destination .content .item .input[data-v-f329ae04]{flex:1}.destination .content .item .text[data-v-f329ae04]{display:flex;flex-grow:1}.destination .content .item .text .title[data-v-f329ae04]{text-align:left;font-size:%?24?%;color:#aaa;margin-top:%?8?%;flex-grow:1;margin-right:10px}.destination .content .item .text .button[data-v-f329ae04]{display:inline-block;padding:5px 10px;font-size:10px;font-weight:700;text-align:center;text-decoration:none;color:#fff;background-color:#37c;box-shadow:0 2px 4px rgba(0,0,0,.2);transition:all .3s ease-in-out;border:2px solid #ccc;border-radius:20px}.destination .content .item .text .button[data-v-f329ae04]:hover{background-color:#259;box-shadow:0 4px 8px rgba(0,0,0,.3);-webkit-transform:translateY(-2px);transform:translateY(-2px)}.destination .content .item .cancel[data-v-f329ae04]{width:%?120?%;height:%?60?%;line-height:%?60?%;text-align:center;background-color:#fff;color:#333;font-size:%?30?%;border-radius:%?30?%;box-shadow:0 0 %?2?% %?2?% #ddd;margin-right:%?20?%}.destination .content .list[data-v-f329ae04]{height:calc(100% - %?120?%);overflow:scroll}',""]),t.exports=e},"59a8":function(t,e,a){"use strict";a.r(e);var o=a("7996"),i=a.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},"61d2":function(t,e,a){t.exports=a.p+"static/img/address.f16d750f.png"},7996:function(t,e,a){"use strict";a("7a82");var o=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("e9c4");var i=o(a("0f15")),s={data:function(){return{myAmapFun:void 0,list:[],token:"",start:"",longitude:"",latitude:"",driver:""}},onLoad:function(){this.myAmapFun=new i.default.AMapWX({key:"ceb72741060af13228ee8c0eb730b40d"}),this.token=uni.getStorageSync("Token"),""!==this.token?(this.driver=uni.getStorageSync("userinfo"),console.log(this.driver),this.getLocation()):uni.navigateTo({url:"/pages/login/login"})},methods:{loadList:function(){var t=this;uni.request({url:"http://localhost:8023/driver/selectAllOrders",method:"POST",data:{longitudeform:this.longitude,latitudefrom:this.latitude},header:{"Content-Type":"application/json",token:this.token},success:function(e){console.log(e),console.log(t.longitude,t.latitude),t.list=e.data.data,console.log(t.list)},fail:function(t){console.log("获取订单信息失败"),uni.showToast({title:"获取订单信息失败",icon:"error"})}})},toIndex:function(t){console.log("当前点击的是",t),uni.request({url:"http://localhost:8023/driver/updateOrderStatus",method:"POST",header:{"Content-Type":"application/json",token:this.token},data:{id:t.id,driverid:this.driver["user"],code:1},success:function(e){uni.setStorageSync("Order",JSON.stringify(t)),uni.showToast({title:"接单成功",icon:"success"}),console.log(e),uni.switchTab({url:"/pages/Driver/Driver"})},fail:function(t){uni.showToast({title:"抢单失败",icon:"error"})}})},getLocation:function(){var t=this;this.myAmapFun.getRegeo({success:function(e){console.log(e),t.start=e[0].name,t.longitude=e[0].longitude,t.latitude=e[0].latitude,console.log(t.start),console.log(t.longitude,t.latitude),t.loadList()},fail:function(t){console.log("获取位置失败",t)}})}}};e.default=s},efb2:function(t,e,a){var o=a("4047");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("c726e0a4",o,!0,{sourceMap:!1,shadowMode:!1})},fb3c:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"destination"},[o("v-uni-view",{staticClass:"content"},t._l(t.list,(function(e){return o("v-uni-view",{key:e.id,staticClass:"item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toIndex(e)}}},[o("v-uni-image",{attrs:{src:a("61d2"),mode:""}}),o("v-uni-view",{staticClass:"text"},[o("v-uni-view",{staticClass:"title"},[o("v-uni-view",[t._v("距离："+t._s(e.milege/1e3+"km"))]),o("v-uni-view",[t._v("起始地址："+t._s(e.staddr))]),o("v-uni-view",[t._v("目的地："+t._s(e.endaddr))])],1),o("v-uni-button",{staticClass:"button"},[t._v("接单")])],1)],1)})),1)],1)},i=[]}}]);